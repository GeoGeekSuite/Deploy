---
- hosts: localhost
  vars_prompt:
    - name: password
      prompt: Set an internal password?
  vars_files:
  - ../environment.yaml
  - ../global_defaults.yaml
  tasks:
  - name: Create roles directory
    ansible.builtin.file:
      path: ../roles
      state: directory
  - name: Create subdirs
    ansible.builtin.file:
      path: '../roles/{{ item.name }}'
      state: directory
    with_items: '{{ roles }}'
  - name: Get Kubernetes role from git
    ansible.builtin.git:
      repo: '{{ item.git }}'
      dest: '../roles/{{ item.name }}'
    with_items: '{{ roles }}'